<svg x="@Offset" y="@VerticalNotePosition()" width="@(LineSpacing * 2)" height="@(LineSpacing * 4)">
    <NoteStemComponent Transform="@StemTransform()" Height="@(LineSpacing * 3)" Width="@(LineSpacing / 5)" />
    <NoteHeadComponent Transform="@HeadTransform()"
                       NoteHead="GetNoteHead()" />
</svg>

@code {
    [Parameter]
    public Note Note { get; set; }

    [Parameter]
    public double Offset { get; set; }

    [Parameter]
    public double LineSpacing { get; set; }

    public string StemTransform()
    {
        return $"translate({LineSpacing * 1.43}px, 0)";
    }

    public string HeadTransform()
    {
        return $"translate(0, {LineSpacing * 2.85}px) scale({0.009 * LineSpacing}, {0.009 * LineSpacing})";
    }

    public double VerticalNotePosition()
    {
        return (LineSpacing * 5.9) - (Note.Pitch.StaffLocation * (LineSpacing / 2));
    }

    public NoteHead GetNoteHead()
    {
        if (Note.Duration.CommonTimeBeatLength >= 2.0)
        {
            return new NoteHead(NoteHeadShape.OpenOval);
        }

        return new NoteHead(NoteHeadShape.ClosedOval);
    }
}
